I rewrote it in shell script because I feel like this code is very bad
    https://gist.github.com/i-spin/6d8a9099adf3963dc166ef73e6a9a0bf

